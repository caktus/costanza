"use strict";if(navigator.mozApps){var checkIfInstalled=navigator.mozApps.getSelf();checkIfInstalled.onsuccess=function(){if(checkIfInstalled.result){}else{var c=document.querySelector("#install"),a=location.href.substring(0,location.href.lastIndexOf("/"))+"/manifest-hosted.webapp",b=document.querySelector("#installation-instructions");c.className="show-install";b.className="show-install";c.onclick=function(){var d=navigator.mozApps.install(a);d.onsuccess=function(){c.style.display="none"};d.onerror=function(){alert("Install failed\n\n:"+d.error.name)}}}}}else{console.log("Open Web Apps not supported")}var reload=document.querySelector("#reload");if(reload){reload.onclick=function(){location.reload(true)}}"use strict";(function(){var a=window.applicationCache;if(a){a.onupdateready=function(){if(confirm("The app has been updated. Do you want to download the latest files? \nOtherwise they will be updated at the next reload.")){location.reload(true)}};var b=document.querySelector("#online-status");if(b){a.onerror=function(){b.className="offline";b.title="Offline"}}}})();"use strict";navigator.getUserMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);var Recorder=(function(){function a(){this.audioContext=new window.AudioContext();this.captureBuffer=null;this.captureNode=null;this.init()}a.prototype={init:function(){var b=this;navigator.getUserMedia({audio:true},function(d){var c=b.audioContext.createMediaStreamSource(d);b.captureNode=b.audioContext.createScriptProcessor(4096,2,2);c.connect(b.captureNode);b.captureNode.connect(b.audioContext.destination)},function(c){console.log("The following error occured: "+c)})},start:function(){var b=this;this.captureBuffer=null;this.captureNode.onaudioprocess=function(d){var g=d.inputBuffer.getChannelData(0),c,f;if(b.captureBuffer===null){b.captureBuffer=g}else{f=b.captureBuffer.length+g.length;c=new Float32Array(f);c.set(b.captureBuffer,0);c.set(g,b.captureBuffer.length);b.captureBuffer=c}}},stop:function(){this.captureNode.onaudioprocess=null},play:function(){var b,c;if(this.captureBuffer!==null){b=this.audioContext.createBuffer(1,this.captureBuffer.length,this.audioContext.sampleRate);b.getChannelData(0).set(this.captureBuffer,0);c=this.audioContext.createBufferSource();c.buffer=b;c.connect(this.audioContext.destination);c.start()}}};return a})();"use strict";(function(){var d=document.querySelector("#record-toggle"),c=document.querySelector("#playback"),b=false,a=new Recorder();d.onclick=function(){if(!b){d.innerHTML="Stop Recording";c.style.display="none";b=true;a.start()}else{d.innerHTML="Start Recording";c.style.display="block";b=false;a.stop()}};c.onclick=function(){a.play()}})();